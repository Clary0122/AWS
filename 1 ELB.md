> \<INDEX>
> - [Load Balancer](#Load-Balancerë€?)
> - [ALB](#ALB)
> - [NLB](#NLB)
> - [CLB](#CLB)

# Load Balancer ë€?
- AWSì˜ VPCì— íƒ‘ì¬ë˜ë©° ì‚¬ìš©ìì˜ ìš”ì²­ì„ ë°›ê³  ì´ë¥¼ VPCë‚´ì˜ ë¦¬ì†ŒìŠ¤(EC2ë“±)ì— ì ì ˆíˆ ë¶€í•˜ ë¶„ì‚°í•œë‹¤.
- ì™¸ë¶€ì˜ ìš”ì²­ì„ ë°›ì•„ë“¤ì´ëŠ” **ë¦¬ìŠ¤ë„ˆ**, ìš”ì²­ì„ ë¶„ì‚°/ì „ë‹¬í•  ë¦¬ì†ŒìŠ¤ì˜ ì§‘í•©ì¸ **ëŒ€ìƒê·¸ë£¹**ìœ¼ë¡œ êµ¬ì„±ëœë‹¤.
  - ë¦¬ìŠ¤ë„ˆ
    - ì™¸ë¶€ì˜ ìš”ì²­ì„ ë°›ì•„ë“¤ì´ê¸° ë•Œë¬¸ì— **ì„œë¹„ìŠ¤ í¬íŠ¸**ë¥¼ ë³´ìœ í•œë‹¤.
    - ì™¸ë¶€ì˜ ìš”ì²­ì´ ì„œë¹„ìŠ¤ í¬íŠ¸ë¡œ ì ‘ì†í•˜ëŠ” ìš”ì²­ë§Œì„ ì²˜ë¦¬í•œë‹¤.
  - ëŒ€ìƒê·¸ë£¹
    - **ì„œë¹„ìŠ¤ í¬íŠ¸**ë¥¼ ë³´ìœ í•œë‹¤.
    - ë¶€í•˜ ë¶„ì‚° ëŒ€ìƒì¸ ë¦¬ì†ŒìŠ¤(EC2 ë“±)ì€ í•´ë‹¹ í¬íŠ¸ê°€ ì—´ë ¤ ìˆì–´ì•¼ í•œë‹¤.
- **í—¬ìŠ¤ì²´í¬**ë¥¼ í†µí•´ ë¶€í•˜ë¶„ì‚° ëŒ€ìƒì¸ ëŒ€ìƒê·¸ë£¹ ë‚´ ë¦¬ì†ŒìŠ¤ë“¤ì„ ëŠì„ì—†ì´ ìƒíƒœ ì²´í¬í•œë‹¤.
- í¬ê²Œ **Internet LB**, **Internal LB**ë¡œ êµ¬ë¶„ëœë‹¤.
  - Internet LB : ì™¸ë¶€ ì¸í„°ë„·ì— ì ‘ì†ì´ ê°€ëŠ¥í•œ **ê³µì¸IPì™€ ì‚¬ì„¤IP** ëª¨ë‘ë¥¼ ê°€ì§€ê³  ìˆìŒ
  - Internal LB : ë‚´ë¶€ì—ì„œì˜ ì ‘ê·¼ë§Œì„ í—ˆìš©í•˜ë©° **ì‚¬ì„¤IP**ë§Œì„ ê°€ì§€ê³  ìˆìŒ
- ìœ í˜• : **ALB**(Application Load Balancer), **NLB**(Network Load Balancer), **GLB**(Gateway Load Balancer), **CLB**(Classic Load Balancer)

# ALB
![image](https://user-images.githubusercontent.com/79209568/169176058-73ba62ee-2822-4fdc-8c75-79a51fe1ce4e.png)

- 7ê³„ì¸µì— í•´ë‹¹í•˜ëŠ” Application Layerì˜ íŠ¹ì„±ì„ ì´ìš©í•˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œ
- ê·¸ ì¤‘ HTTP, HTTPSì˜ íŠ¹ì„±ì„ ì£¼ë¡œ ë‹¤ë£¨ëŠ” ë¡œë“œë°¸ëŸ°ì„œì´ë‹¤. -> ë‹¨ìˆœ ë¶€í•˜ë¶„ì‚°ë¿ë§Œ ì•„ë‹ˆë¼ **HTTP í—¤ë” ì •ë³´ë¥¼ ì´ìš©í•´ ë¶€í•˜ë¶„ì‚°**ì„ ì‹¤ì‹œí•œë‹¤.
  - HTTP í—¤ë” ê°’ì„ ë³´ê³  ì´ ìš”ì²­ì€ A ëŒ€ìƒê·¸ë£¹, ì € ìš”ì²­ì€ B ëŒ€ìƒê·¸ë£¹!
- ê¸°ë³¸ì ìœ¼ë¡œ [êµì°¨ì˜ì—­ ë¡œë“œë°¸ëŸ°ì‹±](#êµì°¨ì˜ì—­-ë¡œë“œë°¸ëŸ°ì‹±)(Cross Zone Load Balancing)ì´ **í™œì„±í™”** ë˜ì–´ìˆë‹¤.
- ğŸ‘‰ [**ALB ìƒì„± ë° ì†ì„± ê°’ ì •ë¦¬**](https://github.com/Clary0122/AWS/blob/main/%EC%8B%A4%EC%8A%B5%20-%20EC2%20%EB%B6%80%ED%95%98%ED%85%8C%EC%8A%A4%ED%8A%B8.md#ALB-%EC%83%9D%EC%84%B1)

# NLB
- 7ê³„ì¸µì— í•´ë‹¹í•˜ëŠ” Transport Layerì˜ íŠ¹ì„±ì„ ì´ìš©í•˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œ
- TCP, UDPë¥¼ ì‚¬ìš©í•˜ëŠ” ìš”ì²­ì„ ë°›ì•„ë“¤ì—¬ ë¶€í•˜ë¶„ì‚°ì„ ì‹¤ì‹œí•˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œì´ë‹¤.
  - ì†¡ì‹ ìì™€ ìˆ˜ì‹ ìê°„ì˜ ë°ì´í„° ì†¡ìˆ˜ì‹ ì„ ìœ„í•œ ì»¤ë„¥ì…˜ì´ í•„ìš”í•œë° ì»¤ë„¥ì…˜ì€ ë„¤íŠ¸ì›Œí¬ ìƒì˜ ê¸°ë‹¤ë€ ì¤„ë¡œ ì¡´ì¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ë…¼ë¦¬ì ì¸ ì¡´ì¬ë¥¼ ì˜ë¯¸í•œë‹¤.
  - ì†¡ìˆ˜ì‹ ìê°€ ëª¨ë‘ ì•Œê³ ìˆê¸° ë•Œë¬¸ì— ë„¤íŠ¸ì›Œí¬ ìƒ ì»¤ë„¥ì…˜ì´ ì¡´ì¬í•˜ëŠ” ê²ƒì²˜ëŸ¼ í‘œí˜„í•¨.
  - ê·¸ë¦¬ê³  Transprot Layerì— ì†Œì†ëœ í”„ë¡œí† ì½œ TCPì™€ UDPëŠ” ì´ ì»¤ë„¥ì…˜ì„ ìƒì„±í•˜ê¸° ìœ„í•œ ì—­í• 
- í•˜ì§€ë§Œ **TCPì™€ UDPì˜ ìƒìœ„ í”„ë¡œí† ì½œì„ ì´í•´í•˜ì§€ ëª»í•œë‹¤.**
  - TCPì˜ ìƒìœ„ í”„ë¡œí† ì½œ : HTTP, HTTPS, FTP, DNS
  - UDPì˜ ìƒìœ„ í”„ë¡œí† ì½œ : DNS, SNMP, DHCP
- **ALB**ëŠ” Layer4ì˜ TCPë¿ë§Œ ì•„ë‹ˆë¼ Layer 7ì˜ HTTP, HTTPS, WebSocketì„ ì´í•´í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— **ë§ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì†Œëª¨í•´ì•¼í•œë‹¤**. í•˜ì§€ë§Œ **NLB**ëŠ” Layer 4ë„ˆë¨¸ì˜ í”„ë¡œí† ì½œì„ ì´í•´í•  í•„ìš”ì—†ì´ TCP, UDPë§Œì„ ì´í•´í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— **ALBë³´ë‹¤ ë¦¬ì†ŒìŠ¤ ì†Œëª¨ê³  ì ë‹¤**. -> **ë§ì€ íŠ¸ë˜í”½ ì²˜ë¦¬ê°€ ê°€ëŠ¥!**
- ê¸°ë³¸ì ìœ¼ë¡œ êµì°¨ì˜ì—­ ë¡œë“œë°¸ëŸ°ì‹±ì´ **ë¹„í™œì„±í™”** ë˜ì–´ìˆë‹¤.
- ğŸ‘‰ [**NLB ìƒì„± ë° ì†ì„± ê°’ ì •ë¦¬**]()

> ### ì°¸ê³ !!
> #### Source IP NAT ì ìš©
> í—·ê°ˆë¦¬ë‹ˆ ë‹¤ì‹œ ì°¾ì•„ë³´ê¸°..

# CLB
![image](https://user-images.githubusercontent.com/79209568/169176028-77592d46-c8de-4118-a910-b1e43e7f4720.png)

- ê°€ì¥ ê¸°ë³¸ì ì¸ í˜•íƒœì´ì ì´ˆê¸°ì— ì œê³µë˜ë˜ ì„œë¹„ìŠ¤.
- ì„œë²„ì˜ ê¸°ë³¸ì£¼ì†Œê°€ ë°”ë€Œë©´ Load Balancerë¥¼ ìƒˆë¡œ ìƒì„±í•´ì•¼íˆë©° í•˜ë‚˜ì˜ ì£¼ì†Œì— í•˜ë‚˜ì˜ ëŒ€ìƒê·¸ë£¹ìœ¼ë¡œ ë³´ë‚´ê²Œ ë¨
- Layer 4ê³„ì¸µì—ì„œ ì‘ë™í•˜ê¸° ë•Œë¬¸ì— ë°ì´í„°ë¥¼ ìˆ˜ì •/ë³€ê²½í•  ìˆ˜ ì—†ì–´ í¬íŠ¸, í—¤ë” ë“±ì˜ ë³€ê²½ì„ í•˜ì§€ ëª»í•¨
- ì´ëŸ¬í•œ êµ¬ì¡°ëŠ” ì„œë²„ì˜ êµ¬ì„±ê³¼ ì•„í‚¤í…ì²˜ê°€ ì»¤ì§€ê³  ë³µì¡í•´ì§. -> Load Balancerì˜ í•„ìš” ê°œìˆ˜, ë¹„ìš©ì´ ì¦ê°€í•˜ê²Œ ë¨.
- ğŸ‘‰ [**CLB ìƒì„± ë° ì†ì„± ê°’ ì •ë¦¬**](https://github.com/Clary0122/AWS/blob/main/%EC%8B%A4%EC%8A%B5%20-%20CLB%20%EC%83%9D%EC%84%B1.md)

# ë¹„êµ
|ALB/CLB|NLB|
|-|-|
|![image](https://user-images.githubusercontent.com/79209568/169176224-fecdbec8-eb64-4257-8849-31cd1f2fe981.png)|![image](https://user-images.githubusercontent.com/79209568/169176245-c25c4b08-c363-45b1-b42f-1e9d034b5a66.png)|
|Reverse Proxy ëŒ€ë¡œ í´ë¼ì´ì–¸íŠ¸ IPì™€ ì„œë²„ ì‚¬ì´ì— ë“¤ì–´ì˜¤ê³  ë‚˜ê°€ëŠ” íŠ¸ë˜í”½ì´ ëª¨ë‘ ë¡œë“œë°¸ëŸ°ì„œì™€ í†µì‹ í•œë‹¤.|í´ë¼ì´ì–¸íŠ¸ IPì™€ ì„œë²„ ì‚¬ì´ì— ì„œë²„ë¡œ ë“¤ì–´ì˜¤ëŠ” íŠ¸ë˜í”½ì€ ë¡œë“œë°¸ëŸ°ì„œë¥¼ í†µí•˜ê³  ë‚˜ê°€ëŠ” íŠ¸ë˜í”½ì€ í´ë¼ì´ì–¸íŠ¸ IPì™€ ì§ì ‘ í†µì‹ í•œë‹¤.|
|ë³´ì•ˆê·¸ë£¹ì„ í†µí•œ ë³´ì•ˆì´ ê°€ëŠ¥|ë³´ì•ˆê·¸ë£¹ ì ìš©ì´ ë˜ì§€ ì•Šì•„ì„œ ì„œë²„ì— ì ìš©ëœ ë³´ì•ˆê·¸ë£¹ì—ì„œ ë³´ì•ˆì´ ê°€ëŠ¥|
|Client â†’ ë¡œë“œë°¸ëŸ°ì„œì˜ ì•¡ì„¸ìŠ¤ ì œí•œ ê°€ëŠ¥|Client â†’ ì„œë²„ì—ì„œ ì•¡ì„¸ìŠ¤ ì œí•œ ê°€ëŠ¥|
|IPì£¼ì†Œê°€ ë³€ë™ë˜ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì•¡ì„¸ìŠ¤ í•  ELBì˜ DNS Nameì„ ì´ìš©í•´ì•¼ í•¨|í• ë‹¹í•œ Elastic IPë¥¼ Static IPë¡œ ì‚¬ìš© ê°€ëŠ¥í•˜ì—¬ DNS Nameê³¼ IP ì£¼ì†Œ ëª¨ë‘ ì‚¬ìš©ì´ ê°€ëŠ¥|
|Name Server ë˜ëŠ” Route 53ì—ì„œ CNAMEì„ ì‚¬ìš©í•´ì•¼ Domain Name ì—°ë™ì´ ê°€ëŠ¥|Name Server ë˜ëŠ” Route 53ì—ì„œ Aë ˆì½”ë“œ ì‚¬ìš©ì´ ê°€ëŠ¥|

![image](https://user-images.githubusercontent.com/79209568/169177932-a22ac8e3-a17a-4cd3-a5e5-1dd200162d40.png)


<hr>

> ### êµì°¨ì˜ì—­ ë¡œë“œë°¸ëŸ°ì‹±
> - ë¶€í•˜ ë¶„ì‚°ì´ ë¶ˆê· í˜•í•œ ìƒíƒœ (EC2ì— í• ë‹¹ëœ ìš”ì²­ì˜ ë¹„ìœ¨ì´ ë¶ˆê· í˜•)  
>   
>   ![image](https://user-images.githubusercontent.com/79209568/168936992-4dd79466-a02b-4032-9633-9f1e4eedd062.png)
>   - ì´ ê²½ìš° AZ aì˜ ë¶€í•˜ê°€ ì‹¬í•˜ê²Œ ê±¸ë¦°ë‹¤.
> - ë¶ˆê· í˜•ì„ ë³´ì™„í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ì´ êµì°¨ì˜ì—­ ë¡œë“œë°¸ëŸ°ì‹±ì´ë‹¤.  
>   
>   ![image](https://user-images.githubusercontent.com/79209568/168937086-603e8dc7-7b17-49db-a067-cdca7beaba07.png)

 
