# AWS와 함께하는 클라우드 컴퓨팅
## Cloud Computing
### 클라우드 컴퓨팅이란?
- 기존 IT 환경 **자체 데이터 센터(호스팅 서비스/IDC)**
  - 데이터 센터 구축/하드웨어 구매
  - 높은 초기 투자 비용
  - 한정된 용량
  - 많은 공수/소요시간 
- 클라우드
  - 필요할 때 언제나
  - 사용한 만큼만 지불
  - 유연한 용량
  - 적은 노력/소요시간

- **초기 투자**나 **장기 계약 없이 인터넷**을 통해 **IT리소스**와 **어플리케이션**을 원할 때 **언제든지 on-demand** 방식으로 **사용한 만큼만 요금**을 내는 서비스

### 클라우드 컴퓨팅의 장점
- 초기 선투자 비용 없음 (가변 비용) : 미리 서버 구매 불필요
- 운영 비용 절감 : 사용한 만큼만 지불
- 탄력적인 운영 및 확장 : 필요 용량 예측 불필요, 수요에 맞는 확장
- 속도 및 민첩성 : 인프라 구축, 변화 대응 빠르게 가능
- 비즈니스에만 집중 가능 : 불필요한 인프라 관리 업무 제거
- 글로벌 확장 : 빠른 시간 내 글로벌 서비스 구현가능

## 왜 AWS를 사용해야하는가?
- 10년 이상 클라우드 업체 선두주자
- 폭 넓고 깊은 서비스
- 고객 지향적 기업 - 빠른 혁신
- 글로벌 인프라
  - **리전**
    - AWS 서비스가 운영되는 넓은 물리적인 데이터 센터의 집합
    - 최소 두 개 이상의 가용영역(AZ)로 이루어져 있음
  - **가용영역(AZ)**
    - 리전 내에 위치한 각각 하나 혹은 여러 개의 데이터 센트의 묶음으로 구성
    - 물리적으로 분리 되어 있고, 전력망 또한 분리 되어있음. 네트워크로 연결 되어 있음
    - 고가용성 확보, 이중화 구성 가능
- 가격 철학
- 파트너 생태계 : 수 만의 파트너사

## 주요 AWS 서비스
### 컴퓨팅 서비스
#### Amazon EC2
- Elastic Compute Cloud
- Virtual Machine 서비스 제공
- **재구성**이 가능한 컴퓨팅 리소스 : 쉬운 용량, 리소스 변경
- 고객 업무 영역에 따른 **다양한 인스턴스 **타입 제공
- 인스턴스 패밀리 종류
   |종류|설명|
   |--|--|
   |범용(M5)|컴퓨팅, 메모리, 네트워크 리소스 균형적 사용|
   |컴퓨팅(C5)|EC2 내 최고 성능 프로세서|
   |메모리(R5)|동영상 작업 등 메모리 용량이 많이 필요한 어플리케이션 용|
   |성능 순간 확장(T2, T3)|평소에는 트래픽이 적으나 순간적으로 트래픽이 몰리는 웹사이트나 워크로드 용|
   |GPU(G3, P3)|GPU가 필요한 경우|
   |높은 I/O (I2)|초고속|
   |고밀도 스토리지(D2)|높은 디스크 처리량|
  
![image](https://user-images.githubusercontent.com/79209568/166398099-310758ff-ab1d-4296-a8f9-374d3af97105.png)
- 과금 옵션 및 비용 최적화
  |옵션명|설명|-|
  |--|-----|--|
  |On-Demand|약정 없이 쓴 만큼만 지불 - 갑작스런 트래픽이나 예측하기 어려운 경우|![image](https://user-images.githubusercontent.com/79209568/166398862-27ab3bcf-c121-479d-a0a4-307fed9310ca.png)|
  |Reserved|1년 혹은 3년 약정 시 40~70% 할인 - 항상 사용중인 안정화 된 서버의 경우|![image](https://user-images.githubusercontent.com/79209568/166399067-32c696ac-5771-4bb1-93f4-ec0ce0d99eae.png)|
  |Spot|남은 자원에 대한 경매 방식 - 단기적으로 수요가 많을 경우|![image](https://user-images.githubusercontent.com/79209568/166399471-47292889-b4a1-4a76-9f1d-f4f345c8c947.png)|

#### Auto Scaling
- **서버를 자동으로 확장하거나 축소하는 기능**
- EC2 인스턴스를 자동으로 늘리고 줄임
- 평균 CPU 사용량, 네트워크를 기준으로 하여 최소 최대 인스턴스를 설정해 놓으면 자동으로 서버 관리 (인프라가 자동으로 관리 되는 만큼 어플리케이션도 맞춰서 개발해야함)
#### AWS Lambda
- 서버리스 컴퓨팅 : 서버가 없는 것이 아닌 신경쓰지 않아도 되도록 해주는 서비스
- 이벤트 기반의 함수를 처리하는 컴퓨팅 서비스
- 고객사에서 원하는 코드로 람다함수에 업로드 해놓고 특정 트리거가 발생했을 때 함수에 저장된 코드를 실행되도록 함.
- 코드가 실행된 ms 시간 단위로 과금 됨

### 스토리지 및 컨텐츠 배포 서비스
#### Amazon S3 : Object Storage
- Simple Storage Service
- 객체 기반의 무제한 파일 저장 스토리지
- **URL**로 파일 공유
- nine eleven(99.999999999%)의 내구성
- 사용한 GB 당 과금
- 다양한 AWS 서비스들과의 통합/연계 지원
- 스토리지 클래스 옵션
  |옵션명|내용|
  |---|-----|
  |Amazon S3 Standard|가장 자주 access하는 hot data를 저장하는 범용 스토리지|
  |Amazon S3 Infrequent Access Storage|낮은 빈도로 access하는 데이터들을 저장하는 스토리지|
  |Amazon Glacier|더욱 낮은 빈도로 access하거나 단순히 저장만 하는 로그 기록 등을 저장하는 스토리지|
  - **라이프 사이클 기능 제공** : 특정 기간이 지나게 되면 자동으로 이동되도록 설정할 수 있음
  
  ```
  Amazon Glacier : S3와 동일한 내구성의 cold 데이터 백업/아카이빙 용도
  -> 검색요금이 발생할 수 있음 (데이터 access 시간이 짧을수록 과금되는 비용)
  ```
#### Amazon EBS : Block Storage
- EC2에 attach해서 쓸 수 있는 블록 스토리지 (VM에 마운트해서 사용하는 하드디스크의 개념)
- EC2와 마찬가지로 필요할 때 늘이거나 줄일 수 있기 때문에 필요한 만큼만 할당받아서 사용가능
```
* 한 개의 EBS가 여러 개의 EC2에 attach 불가
  한 개의 EC2에 여러 개의 EBS를 attach 
```

#### Amazon CloudFront (CDN)
- PoP(Point of Presence)이라는 서버 자원에 컨텐츠를 미리 캐싱해두어서 해당 컨텐츠에 대해 유저가 요청했을 때 멀리있는 오리진 서버까지 가지 않고 사용자와 가까운 PoP에서 컨텐츠를 가져옴으로써 사용자에게 더 낮은 지연시간을 제공, 더 빠르게 서비스 배포 가능
  > PoP = Edge Location
- AWS 서비스와 CloudFront 간 데이터 전송 무료
- AWS Shield Standard 무료 제공 : DDoS 방어


### 데이터베이스 서비스
#### Amazon RDS
- **관리형 관게형 DB 서비스**
- 다양한 DB 엔진 제공 : PostgreSQL, Amazon Aurora, MySQL, MariaDB, Oracle, SQL Server
- Multi-AZ 기능(DB 이중화 기능)
  - Master - Slave 간 자동 싱크
  - Master에서 문제 발생 시 자동으로 Slave로 fail over 진행
  - fail over 진행 시 end point 변경 없이 자동으로 처리되기 때문에 이중화 구성에 용이
  - **요약 : 활성 DB 서버(마스터)의 데이터를 대기 서버(Slave)에 동기화하여 복제 중복 구성으로 구축**  
  ![image](https://user-images.githubusercontent.com/79209568/166410475-4175e7cb-fa24-4d80-882a-7d00092e92bd.png)
  
- Read Replica
  - DB는 대체로 쓰기 작업보다 읽기 작업이 많기 때문에 읽기 전용 인스턴스를 여러개 만들어서 부하를 분산 가능  
  ![image](https://user-images.githubusercontent.com/79209568/166410565-9af64ea5-e64a-4e08-9706-f8fb4214c510.png)
- 인스턴스 확장 자유로움 
#### Amazon DynamoDB
- **관리형 NoSQL DB 서비스**

#### Amazon ElastiCache
- **인메모리 캐싱 서비스**

<span style="color:blue"> (DynamoDB, ElastiCache 관련 내용 서치해서 정리) </span>

## AWS 보안 : 책임 공유 모델
- 클라우드 인프라 위의 **고객 데이터, 어플리케이션**의 보안은 **고객** 담당
- 클라우드 **인프라 서비스** 자체에 대한 보안은 **AWS** 가 담당

<span style="color:blue"> (뒤에서 이어서 함. 간단히 정리) </span>

## AWS 비용 최적화
- 적절한 용량 산정
- 구매 옵션 이해하고 잘 선택 (100% On-demand 방식이 아닌 RI, Spot 인스턴스 등을 활용)
- 탄력적 아키텍처 : Auto Scailing
- 지속적으로 인프라를 관리, 측정, 모니터링을 통해 개선해 나갈 수 있음 
- AWS Trusted Advisor : 자동으로 비용 최적화 관련 진단이 가능


