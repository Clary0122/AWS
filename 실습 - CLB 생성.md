> \<INDEX>
> - [CLB ìƒì„±](#CLB-ìƒì„±)
>   - [Load Balancer ì •ì˜](#1-load-balancer-ì •ì˜)
>   - [ë³´ì•ˆ ê·¸ë£¹ í• ë‹¹](#2-ë³´ì•ˆ-ê·¸ë£¹-í• ë‹¹)
>   - [ë³´ì•ˆ ì„¤ì • êµ¬ì„±](#3-ë³´ì•ˆ-ì„¤ì •-êµ¬ì„±)
>   - [ìƒíƒœ ê²€ì‚¬ êµ¬ì„±](#4-ìƒíƒœ-ê²€ì‚¬-êµ¬ì„±)
>   - [EC2 ì¸ìŠ¤í„´ìŠ¤ ì¶”ê°€](#5-EC2-ì¸ìŠ¤í„´ìŠ¤-ì¶”ê°€)
>   - [íƒœê·¸ ì¶”ê°€](#6-íƒœê·¸-ì¶”ê°€)
>   - [ê²€í† ](#7-ê²€í† )
> - [EC2ì™€ ì—°ê²°](#EC2ì™€-ì—°ê²°)
> - [ì ‘ì† í™•ì¸](#ì ‘ì†-í™•ì¸)
> - [ì •ë¦¬](#ì •ë¦¬)

# CLB ìƒì„±
## 1. Load Balancer ì •ì˜
### ê¸°ë³¸ êµ¬ì„±
![image](https://user-images.githubusercontent.com/79209568/169178638-818cdb05-03b3-4f04-a1db-6ea97595c153.png)
#### ë‚´ë¶€ Load Balancer ìƒì„±
- ì²´í¬í•˜ë©´ **ë‚´ë¶€ ë¡œë“œë°¸ëŸ°ì„œ**, í•´ì œí•˜ë©´ **ì¸í„°ë„· ì—°ê²° ë¡œë“œë°¸ëŸ°ì„œ**
  - ì¸í„°ë„· ì—°ê²° ë¡œë“œë°¸ëŸ°ì„œ : ê³µìš© IP ì£¼ì†Œ. DNS Nameì€ ë…¸ë“œì˜ ê³µìš© IP ì£¼ì†Œë¡œ ê³µê°œì ìœ¼ë¡œ í™•ì¸ê°€ëŠ¥, ì¸í„°ë„·ì„ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë¼ìš°íŒ… ê°€ëŠ¥
  - ë‚´ë¶€ ë¡œë“œë°¸ëŸ°ì„œ : ì‚¬ì„¤ IP ì£¼ì†Œ. DNS Nameì€ ë…¸ë“œì˜ ì‚¬ì„¤ IP ì£¼ì†Œë¡œ ê³µê°œì ìœ¼ë¡œ í™•ì¸ê°€ëŠ¥, ë¡œë“œ ë°¸ëŸ°ì„œìš© VPCì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì´ ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ë§Œ ë¼ìš°íŒ… ê°€ëŠ¥
#### ë¦¬ìŠ¤ë„ˆ êµ¬ì„±
- ë¡œë“œ ë°¸ëŸ°ì„œì˜ í”„ë¡œí† ì½œê³¼ í¬íŠ¸ì™€ ë¼ìš°íŒ… í•  ì¸ìŠ¤í„´ìŠ¤ì˜ í”„ë¡œí† ì½œê³¼ í¬íŠ¸ë¥¼ ì„¤ì •í•œë‹¤.
- **HTTPS(ë³´ì•ˆì„œë²„)** ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•  ê²½ìš°
  - ACM(AWSì˜ì¸ì¦ì„œ)ëŠ” ì¸ìŠ¤í„´ìŠ¤ì—ëŠ” ì‚¬ìš©í•˜ì§€ ëª»í•˜ê³  **ELBì™€ Cloud Front**ì—ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
  - ê·¸ë ‡ê¸° ë•Œë¬¸ì— LBì˜ í”„ë¡œí† ì½œì€ HTTPS, í¬íŠ¸ëŠ” 443ìœ¼ë¡œ ì„¤ì •í•˜ê³ , ì¸ìŠ¤í„´ìŠ¤ì˜ í”„ë¡œí† ì½œì€ HTTP, 80ìœ¼ë¡œ ì—´ì–´ ë†“ëŠ”ë‹¤.  
    
    ![image](https://user-images.githubusercontent.com/79209568/169179699-5bcda5f9-24fc-40eb-8353-51866907c9db.png)
  - ë§Œì•½ ì‚¬ì„¤ ì¸ì¦ì„œë¥¼ ì“°ëŠ” ê²½ìš° : ì¸ìŠ¤í„´ìŠ¤ì— **ì‚¬ì„¤ ì¸ì¦ì„œ**ë¥¼ ì¶”ê°€í•´ì£¼ê³  ì¸ìŠ¤í„´ì˜ í”„ë¡œí† ì½œê³¼ í¬íŠ¸ë¥¼ HTTPS, 443ìœ¼ë¡œ í•´ ì¤€ë‹¤.  
    
    ![image](https://user-images.githubusercontent.com/79209568/169179856-8f84995d-8f57-4b62-abf6-3858b0f5ebb8.png)
### ì„œë¸Œë„· ì„ íƒ
![image](https://user-images.githubusercontent.com/79209568/169180193-c4e83dfd-064f-4e7c-8fe2-10aa5dd9dd55.png)
- ê°€ìš©ì˜ì—­ a, cì˜ public ì„œë¸Œë„· ì„ íƒ
  - ì¸í„°ë„· ì—°ê²° ë¡œë“œë°¸ëŸ°ì„œë¥¼ ì„ íƒí–ˆê¸° ë•Œë¬¸ì— (ì—¬ê¸°ì„œ private ì„œë¸Œë„·ì„ ì„ íƒí•˜ë©´ ì˜¤ë¥˜ ë‚¨)  
    ![image](https://user-images.githubusercontent.com/79209568/169180959-a7167179-c596-440d-bfd2-2de776010a78.png)

## 2. ë³´ì•ˆ ê·¸ë£¹ í• ë‹¹
![image](https://user-images.githubusercontent.com/79209568/169181816-ad133cf4-41dc-4bab-8a34-e9511dc85773.png)

## 3. ë³´ì•ˆ ì„¤ì • êµ¬ì„±
### ì¸ì¦ì„œ ì„ íƒ
#### ì¸ì¦ì„œ ìœ í˜• : ACMì—ì„œ ì¸ì¦ì„œ ì„ íƒ
![image](https://user-images.githubusercontent.com/79209568/169182012-658bbdce-4548-41ef-8d34-7f73e169e677.png)
- ACM ì„œë¹„ìŠ¤ì—ì„œ ì¸ì¦ì„œ ìš”ì²­ ì„ íƒ
  - [ACMê³¼ CAì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ì§€?](#ACMê³¼-CA)  
  
  ![image](https://user-images.githubusercontent.com/79209568/169185219-5b7354aa-32fb-4978-b3ae-f1a0f439e84c.png)
- ì¸ì¦ì„œ ìš”ì²­ : **í¼ë¸”ë¦­ ì¸ì¦ì„œ ìš”ì²­**   
  
  ![image](https://user-images.githubusercontent.com/79209568/169185308-6152bae6-97da-42fa-87f4-314b9d071ea3.png)

- í¼ë¸”ë¦­ ì¸ì¦ì„œ ìš”ì²­  
  
  ![image](https://user-images.githubusercontent.com/79209568/169187009-c55a9c54-9224-4580-b75c-73064d87c800.png)
- ì¸ì¦ì„œ ë°œê¸‰ ì™„ë£Œ - ê²€ì¦ ëŒ€ê¸° ì¤‘ì´ë¯€ë¡œ `Route 53ì—ì„œ ë ˆì½”ë“œ ìƒì„±` í´ë¦­
  
  ![image](https://user-images.githubusercontent.com/79209568/169194351-683bad8e-969b-4340-94a1-410a9645dc6e.png)


- ë ˆì½”ë“œ ìƒì„±  
  
  ![image](https://user-images.githubusercontent.com/79209568/169194502-ecf25130-4616-42db-9ebf-d3b6c62195cb.png)


- Route 52ì— CNAME ìœ í˜•ì˜ ë ˆì½”ë“œê°€ ìƒì„±ë˜ì–´ ìˆë‹¤  
  ![image](https://user-images.githubusercontent.com/79209568/169187347-545d8be3-6957-46e3-b0ab-d73213501f61.png)
- ë°œê¸‰ë„ ì™„ë£Œ  
  
  ![image](https://user-images.githubusercontent.com/79209568/169187476-035f539a-085a-479b-ae27-d7358b23aa7a.png)

### ì•”í˜¸ ì„ íƒ
- ELBëŠ” SSL í˜‘ìƒ êµ¬ì„±ì´ ë¯¸ë¦¬ ì •ì˜ëœ ë³´ì•ˆ ì •ì±…ì„ ì œê³µí•˜ê±°ë‚˜ ì‚¬ìš©ì ì§€ì • ë³´ì•ˆ ì •ì±…ì„ ìƒì„± ê°€ëŠ¥
- í•­ìƒ ìµœì‹ ì˜ ë³´ì•ˆ ì •ì±…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ  
  
![image](https://user-images.githubusercontent.com/79209568/169188126-ea3dc7e9-fb3d-491d-9962-3068f7e49907.png)

## 4. ìƒíƒœ ê²€ì‚¬ êµ¬ì„±
![image](https://user-images.githubusercontent.com/79209568/169188440-99b1358f-b2f3-459d-be0d-12077fd838d9.png)
### ê³ ê¸‰ ì„¸ë¶€ ì •ë³´
#### ì‘ë‹µ ì‹œê°„ ì´ˆê³¼
- ìƒíƒœ ê²€ì‚¬ë¡œë¶€í„° ì‘ë‹µì„ ìˆ˜ì‹ í•  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ (2-60ì´ˆ)
#### ê°„ê²©
- ìƒíƒœ ê²€ì‚¬ ì‚¬ì´ì˜ ì‹œê°„ (5~300ì´ˆ)
#### ë¹„ì •ìƒ ì„ê³„ê°’
- EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¹„ì •ìƒìœ¼ë¡œ ì„ ì–¸í•˜ê¸° ì „ê¹Œì§€ ë°œìƒí•˜ëŠ” ì—°ì†ì  ìƒíƒœ ê²€ì‚¬ ì‹¤íŒ¨ íšŸìˆ˜
#### ì •ìƒ ì„ê³„ê°’
- EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì •ìƒìœ¼ë¡œ ì„ ì–¸í•˜ê¸° ì „ê¹Œì§€ ë°œìƒí•˜ëŠ” ì—°ì†ì  ìƒíƒœ ê²€ì‚¬ ì„±ê³µ íšŸìˆ˜   
  
  ![image](https://user-images.githubusercontent.com/79209568/169189031-5c203430-55f6-441a-8cb7-d789266789bd.png)

## 5. EC2 ì¸ìŠ¤í„´ìŠ¤ ì¶”ê°€
![image](https://user-images.githubusercontent.com/79209568/169189140-bf6ccd92-f804-4d61-b824-d474e09cf11c.png)

- ê°€ìš©ì˜ì—­ aì— í¼ë¸”ë¦­ ì„œë¸Œë„· ë‚´ì— ë§Œë“¤ì–´ ë†“ì€ **KCY_ec2** ì¸ìŠ¤í„´ìŠ¤ ì¶”ê°€
#### êµì°¨ ì˜ì—­ ë¡œë“œ ë°¸ëŸ°ì‹± í™œì„±í™”
- êµì°¨ ì˜ì—­ ë¡œë“œ ë°¸ëŸ°ì‹±ì€ Load Balancerì— í™œì„±í™”ëœ ê°€ìš© ì˜ì—­ì˜ ëŒ€ìƒ ì „ë°˜ì—ì„œ íŠ¸ë˜í”½ì„ ê· ë“±í•˜ê²Œ ë¶„ì‚°
- [êµì°¨ ì˜ì—­ ë¡œë“œ ë°¸ëŸ°ì‹± ê·¸ë¦¼ ë° ì„¤ëª…](https://github.com/Clary0122/AWS/blob/main/1%20ELB.md#%EA%B5%90%EC%B0%A8%EC%98%81%EC%97%AD-%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%8B%B1)

#### Connection Draining í™œì„±í™”
- ê¸°ì¡´ íŠ¸ë˜í”½ì´ í”Œë¡œìš°ë¥¼ ì§€ì†í•˜ë„ë¡ í—ˆìš©í•  ê¸°ê°„(ì´ˆ)

## 6. íƒœê·¸ ì¶”ê°€
- Key : `Name`
- Value : `KCY`

## 7. ê²€í† 
![image](https://user-images.githubusercontent.com/79209568/169189679-9cf0aeee-ebbe-4f2f-a8c4-bd7fbb00aec1.png)


## 8. ìƒì„±ì™„ë£Œ
![image](https://user-images.githubusercontent.com/79209568/169189639-3dfa5dd4-3e42-47df-902f-567c3743851e.png)

# EC2ì™€ ì—°ê²°
![image](https://user-images.githubusercontent.com/79209568/169435541-07367535-9e49-413d-ba36-c68719f59bde.png)

> - CLBì˜ ë³´ì•ˆê·¸ë£¹ì˜ ì¸ë°”ë‘”ë“œ ê·œì¹™ì´ `HTTP 80í¬íŠ¸`, `HTTPS 443í¬íŠ¸`ì´ë¯€ë¡œ **EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ë³´ì•ˆê·¸ë£¹ ì¸ë°”ìš´ë“œ ê·œì¹™ë„ ì¶”ê°€**í•´ì¤˜ì•¼ í•œë‹¤.
> - í•˜ì§€ë§Œ ë¦¬ìŠ¤ë„ˆ êµ¬ì„±í•  ë•Œ HTTPS/443ë„ ëŒ€ìƒ í”„ë¡œí† ì½œì„ HTTP/80ìœ¼ë¡œ í–ˆê¸° ë•Œë¬¸ì— ì¸ë°”ìš´ë“œ ê·œì¹™ì— HTTP/80ìœ¼ë¡œ í•˜ë‚˜ë§Œ ì¶”ê°€í•´ë„ ëœë‹¤.
  
![image](https://user-images.githubusercontent.com/79209568/169436087-78efc113-78ca-41da-9b39-5fc381582373.png)

# ì ‘ì† í™•ì¸
- ALB ìƒì„±í•˜ë©° ì„¤ì¹˜í–ˆë˜ EC2ì˜ ì•„íŒŒì¹˜[âœ”ê³¼ì •ë³´ëŸ¬ê°€ê¸°](https://github.com/Clary0122/AWS/blob/main/%EC%8B%A4%EC%8A%B5%20-%20EC2%20%EB%B6%80%ED%95%98%ED%85%8C%EC%8A%A4%ED%8A%B8.md#ec2-%EC%84%9C%EB%B2%84%EC%97%90-apache-%EC%84%A4%EC%B9%98) ì„œë²„ë¡œ NLBë¥¼ í†µí•´ ì˜ ì ‘ì†ë˜ëŠ”ì§€ í™•ì¸
- NLBì˜ DNS Name ë³µì‚¬  
  ![image](https://user-images.githubusercontent.com/79209568/169209112-3bd2221b-c132-411e-9e88-7e5f4034c14f.png)

- í™•ì¸  
  ![image](https://user-images.githubusercontent.com/79209568/169210773-d52233f9-8d99-4ec9-b416-efcbc0627cb5.png)

- ë’¤ì— `health/healthcheck.html`ì„ ì¶”ê°€í•´ì„œ html íŒŒì¼ì´ ì¶œë ¥ë˜ëŠ” ì§€ í™•ì¸

# ì •ë¦¬
![image](https://user-images.githubusercontent.com/79209568/169210031-5f88f06a-ecc2-486c-8175-24d022d4fa2b.png)

[ğŸ‘‰ì•¡ì„¸ìŠ¤ ë¡œê·¸ì—ì„œ í´ë¼ì´ì–¸íŠ¸ IP í™•ì¸](https://github.com/Clary0122/AWS/blob/main/ELB%20Access%20Log.md)

<hr>

> ### ACMê³¼ CA
> #### ACM
> - TLSë¥¼ ì‚¬ìš©í•˜ì—¬ ê³µê°œì ìœ¼ë¡œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë³´ì•ˆ ì›¹ì´ í•„ìš”í•œ ê¸°ì—… ê³ ê°ì„ ìœ„í•œ ì¸ì¦ì„œ
> - ACM ì¸ì¦ì„œëŠ” **ELB, CloudFront, API Gateway** ë° ê¸°íƒ€ í†µí•© ì„œë¹„ìŠ¤ì— ë°°í¬ ê°€ëŠ¥
> - ì´ëŸ¬í•œ ì¢…ë¥˜ì˜ ê°€ì¥ ì¼ë°˜ì ì¸ ì‘ìš© í”„ë¡œê·¸ë¨ì€ **ìƒë‹¹í•œ íŠ¸ë˜í”½ ìš”êµ¬ ì‚¬í•­ì´ ìˆëŠ” ì•ˆì „í•œ ê³µê°œ ì›¹ ì‚¬ì´íŠ¸**ì´ë‹¤.
> #### ACM Private CA
> - AWS í´ë¼ìš°ë“œ ë‚´ì— PKI(ê³µê°œ í‚¤ ì¸í”„ë¼)ë¥¼ êµ¬ì¶•í•œ ê¸°ì—… ê³ ê°ì„ ìœ„í•œ ê²ƒìœ¼ë¡œ **ì¡°ì§ ë‚´ì—ì„œ ê°œì¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê²ƒ** - _ì¸í„°ë„·ì´ ì•„ë‹Œ ì¡°ì§ë‚´ì—ì„œë§Œ ì‹ ë¢°_
> - CAë¥¼ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ì‚¬ìš©ì, ì»´í“¨í„°, ì–´í”Œë¦¬ì¼€ì´ì…˜, ì„œë¹„ìŠ¤, ì„œë²„ ë° ê¸°íƒ€ ì¥ì¹˜ë¥¼ ì¸ì¦í•˜ê³  ì»´í“¨í„° ì½”ë“œì— ì„œëª…í•˜ê¸° ìœ„í•œ ì¸ì¦ì„œë¥¼ **ì¡°ì§ ë‚´ë¶€ ìš”êµ¬ì— ë§ê²Œ ì§ì ‘ ìƒì„± ê°€ëŠ¥**
